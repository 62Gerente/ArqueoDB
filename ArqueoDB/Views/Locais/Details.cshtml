@model ArqueoDB.Models.Local
@using ArqueoDB.Models

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_LayoutArqueodb.cshtml";
    Utilizador user = ((Utilizador)(Session["Utilizador"]));

}
@section breadcrumb {
				<div class="breadcrumb-button">
				   <a href="#">
                    <span class="breadcrumb-label">
					<i class="icon-map-marker"></i> Locais </span>
					<span class="breadcrumb-arrow"><span></span></span>
                   </a>
				</div>
				<div class="breadcrumb-button">
                   <a href="#">
					<span class="breadcrumb-label">
					<i class="icon-map-marker"></i> @Model.Nome </span>
					<span class="breadcrumb-arrow"><span></span></span>
                   </a>
				</div> 
}

		<div class="container-fluid padded">
			<div class="row-fluid">
				<div class="span10">
					<!-- find me in partials/big_chart -->
					<div class="box">
						<div class="box-header">
							<div class="title">
								<span><i class="icon-desktop"> </i></span> <span> Perfil do @Model.Nome</span>
							</div>
						</div>
						<div class="box-content padded">
							<div class="row-fluid">
								<div class="span2">
									<div id="avatarpic" style="margin: 0px auto 0px; text-align: left;">
										<a href="@(Model.Imagens.First().Directoria.Caminho + Model.Imagens.First().Nome)" style="background-image:url(@(Model.Imagens.First().Directoria.Caminho + Model.Imagens.First().Nome));margin: 10px 0px 0px;"></a>
									</div>
								</div>
								<div class="span4" style="padding-left:20px;">
									<h4>@Model.Nome</h4>
									<h5><b>Organização</b></h5>
									<p>
										 <b>Organização responsável:</b> <br /><a href="/Organizacoes/Details/@Model.Organizacao.OrganizacaoID">@Model.Organizacao.Nome</a>
									</p>
									<p>
										 <b>Profissional responsável:</b> <br /><a href="/Utilizadores/Details/@Model.Responsavel.UtilizadorID">@Model.Responsavel.Utilizador.Nome</a>
									</p>
								</div>
								<div class="span4" style="padding-left:20px;">
									<h5 style="margin: 10px 0;line-height:23px;">
										<b>Informações</b>
									</h5>
									<p>
										 <b>Data criação:</b> @Model.DataRegisto.ToShortDateString()
									</p>
									<p>
										 <b>Localização:</b> @Model.Distrito.Nome
									</p>
									<p>
										 <b>Cordenadas:</b> @Model.Coordenadas
									</p>
								</div>
                                @if(Model.Organizacao.Membros.FirstOrDefault(m => m.UtilizadorID == user.UtilizadorID) != null){
                                <div class="span2" style="margin-top: 32px;">
					                <div class="action-nav-normal rounded">
                                        <li class="action-nav-button btn-small">
                                            <a href="/DashOrganizacao/Dashboard/@Model.OrganizacaoID" title="Gerir Organização" class="tip" title="" data-original-title="Gerir Organização">
                                                <i class="icon-cogs"></i>
                                            </a>
                                         </li>
					                </div>
                                </div>
                                }
							</div>
						</div>
					</div>
                    </div>
                    <div class="span2" style="padding-top:25px;">
					<!-- find me in partials/action_nav_normal -->
					<!--big normal buttons-->
					<div class="action-nav-normal">
						<div class="row-fluid">
							<div class="span12 action-nav-button">
								<a href="#" title="Enviar Email">
								<i class="icon-envelope"></i>
								<span>Enviar Email</span>
								</a>
								<span class="triangle-button red"><i class="icon-plus"></i></span>
							</div>
						</div>
                        @if(Model.Seguidores.FirstOrDefault(u => u.UtilizadorID == user.UtilizadorID) == null){
						<div class="row-fluid">
							<div class="span12 action-nav-button">
								<a href="/Locais/Seguir?id=@user.UtilizadorID&seguir=@Model.LocalID" title="Seguir local">
								<i class="icon-rss"></i>
								<span>Seguir local</span>
								</a>
							</div>
						</div>
                        }else{
						<div class="row-fluid">
							<div class="span12 action-nav-button">
								<a href="/Locais/DeixarSeguir?id=@user.UtilizadorID&seguir=@Model.LocalID" title="Deixar de seguir local">
								<i class="icon-rss"></i>
								<span>Deixar de seguir</span>
								</a>
							</div>
						</div>
                        }
					</div>
				</div>
            </div>
        </div>

	<div class="container-fluid padded">
		<div class="row-fluid">
			<div class="span4">
				<!-- find me in partials/big_chart -->
				<div class="box">
                    	<div class="box-header">
							<div class="title">
								<span><i class="icon-info-sign"> </i></span> <span> Sobre</span>
							</div>
						</div>
					<div class="box-content" style="padding:10px; height:180px;">
						<div class="row-fluid scrollable" style="height:180px; overflow-y:auto;">
							<p>
                                @Model.Descricao
                            </p>
						</div>
					</div>
				</div>
			</div>

			<div class="span8">
				<!-- find me in partials/big_chart -->
				<div class="box">
                    	<div class="box-header">
							<div class="title">
								<span><i class="icon-map-marker"> </i></span> <span> Localização</span>
							</div>
						</div>
					<div class="box-content"  style="padding:10px; height:180px;">
                        <div id="map-canvas" style="height:180px"></div>
					</div>
				</div>
			</div>
			</div>
		</div>

	<div class="container-fluid padded">
		<div class="row-fluid">
			<div class="span12">
				<!-- find me in partials/big_chart -->
				<div class="box">
                    	<div class="box-header">
							<div class="title">
								<span>Artefactos</span>
							</div>
						</div>
					<div class="box-content"  style="padding:10px; height:180px;">
                        
					</div>
				</div>
			</div>
			</div>
		</div>

    <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(@Model.Coordenadas),
                zoom: 16,
                mapTypeId: google.maps.MapTypeId.HYBRID
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
                mapOptions);
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>